# Проектирование сети

`Цель:`
В данной самостоятельной работе необходимо распланировать адресное пространство,
настроить IP на всех активных портах для дальнейшей работы над проектом,
адресное пространство должно быть задокументировано

# Задание:
- `Часть1:` Разработать и задокументировать адресное пространство для лабораторного стенда.
- `Часть2:` Настроить ip адреса на каждом активном порту
- `Часть3:` Настроить каждый VPC в каждом офисе в своем VLAN.
- `Часть4:` Настроить VLAN/Loopbackup interface управления для сетевых устройств
- `Часть5:` Настроить сети офисов так, чтобы не возникало broadcast штормов, а использование линков было максимально оптимизировано

<br><br>
- ## Часть 1. Адресное пространство для лабораторного стенда

![](https://github.com/Samurai1135/otus-network-engeneer/blob/58a7fa0f116f6d29fb50b61b751c714ddcf48901/Lab-04/Network%20Scheeme/stand.png)

>Для связи коммутаторов между офисами и провайдерами используем сети класса А. Формат IP-адреса: 10.x.x.x с маской 255.255.255.252<br>
>Для локальных сетей офисов используем сети класса С. Формат IP-адреса: 192.168.x.x с маской 255.255.255.0<br>
>Внутриофисные подсети для связи коммутаторов имеют формат IP-адреса: 10.128.0.0  с маской 255.255.255.252<br>

Подсети Чокурдах-Триада: 10.0.0.0/30 и 10.0.1.0/30 <br>
Подсеть Лабытнанги-Триада: 10.0.3.0/30<br>
Подсети С.-Петербург-Триада: 10.0.2.0/30 и 10.0.4.0/30<br>
Подсеть Ламас-Триада: 10.6.0.0/30<br>
Подсеть Киторн-Триада: 10.5.0.0/30<br>
Подсеть Киторн-Ламас: 10.9.0.0/30<br>
Подсеть Москва-Киторн: 10.7.0.0/30<br>
Подсеть Москва-Ламас: 10.8.0.0/30<br>
<br>
<b>_Подсети в офисе Москва:_</b><br>
R14-R13: 10.128.21.0/30<br>
R14-R12: 10.128.20.0/30<br>
R15-R12: 10.128.22.0/30<br>
R15-R13: 10.128.23.0/30<br>
<br>
<b>_Подсети в офисе С.-Петербург:_</b><br>
R18-R17: 10.128.0.0/30<br>
R18-R16: 10.128.2.0/30<br>
<br>
<b>_Подсети провайдера Триада:_</b><br>
R24-R26: 10.1.0.0/30<br>
R26-R25: 10.4.0.0/30<br>
R25-R23: 10.3.0.0/30<br>
R23-R24: 10.2.0.0/30<br>

- ## Часть 2. Настройка IP-адресов на активных портах сетевых устройств

<b>Офис Москва:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R12                 | eth 0/2             | 10.128.20.2/30 |
|                    | eth 0/3                  | 10.128.22.2/30 |
|                 | eth 0/0.6             | 192.168.6.254/24 |
|                    | eth 0/1.7                 | 192.168.7.253/24 |
| R13                 | eth 0/2             | 10.128.23.2/30 |
|                    | eth 0/3                  | 10.128.21.2/30 |
|                 | eth 0/0.7             | 192.168.7.254/24 |
|                    | eth 0/1.6                  | 192.168.6.253/24 |
| R14                 | eth 0/0             | 10.128.20.1/30 |
|                    | eth 0/1                  | 10.128.21.1/30 |
|                    | eth 0/2                  | 10.7.0.2/30 |
| R15                 | eth 0/0             | 10.128.23.1/30 |
|                    | eth 0/1                  | 10.128.22.1/30 |
|                    | eth 0/2                  | 10.8.0.2/30 |

<b>Офис С.-Петербург:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R18                 | eth 0/0             | 10.128.2.1/30 |
|                    | eth 0/1                  | 10.128.0.1/30 |
|                 | eth 0/2            | 10.0.4.2/30 |
|                 | eth 0/3            | 10.0.2.2/30 |
|                    | eth 0/1.7                 | 192.168.7.253/24 |
| R17                 | eth 0/0.4             | 192.168.4.254/24 |
|                    | eth 0/1                  | 10.128.0.2/30 |
|                 | eth 0/2.5             | 192.168.5.253/24 |
|                    | eth 0/1.6                  | 192.168.6.253/24 |
| R16                 | eth 0/0.5             | 192.168.5.254/24 |
|                    | eth 0/1                  | 10.128.2.2/30 |
|                    | eth 0/2.4                  | 192.168.4.253/24 |

<b>Офис Чокурдах:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R28                 | eth 0/0             | 10.0.0.2/30 |
|                    | eth 0/1                  | 10.0.1.2/30 |
|                 | eth 0/2.2            | 192.168.2.254/24 |
|                 | eth 0/2.3            | 192.168.3.254/24 |

<b>Офис Лабытнанги:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R27                 | eth 0/0             | 10.0.3.2/30 |

<b>Провайдер Триада:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R23                 | eth 0/0             | 10.5.0.1/30 |
|                  | eth 0/1             | 10.3.0.2/30 |
|                | eth 0/2             | 10.2.0.1/30 |
| R24                 | eth 0/0             | 10.6.0.1/30 |
|                  | eth 0/1             | 10.1.0.2/30 |
|                | eth 0/2             | 10.2.0.2/30 |
|                | eth 0/3             | 10.0.4.1/30 |
| R25                 | eth 0/0             | 10.3.0.1/30 |
|                  | eth 0/1             | 10.0.3.1/30 |
|                | eth 0/2             | 10.4.0.2/30 |
|                | eth 0/3             | 10.0.1.1/30 |
| R26                 | eth 0/0             | 10.1.0.1/30 |
|                  | eth 0/1             | 10.0.0.1/30 |
|                | eth 0/2             | 10.4.0.1/30 |
|                | eth 0/3             | 10.0.2.1/30 |

<b>Провайдер Ламас:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R21                 | eth 0/0             | 10.8.0.1/30 |
|                  | eth 0/1             | 10.9.0.1/30 |
|                | eth 0/2             | 10.6.0.2/30 |

<b>Провайдер Киторн:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R21                 | eth 0/0             | 10.7.0.1/30 |
|                  | eth 0/1             | 10.9.0.2/30 |
|                | eth 0/2             | 10.5.0.2/30 |


- ## Часть 3. Настройка каждого VPC в отдельном VLAN

В нашей сети для каждого офиса развернут свой DHCP-сервер на маршрутизаторах R15 (Vlan 6,7), R18 (Vlan 4,5), R28 (Vlan 2,3)

#### Примеры конфигурации DHCP-серверов:

<b>R15:</b>
~~~
!
ip dhcp pool VLAN7
 network 192.168.7.0 255.255.255.0
 default-router 192.168.7.254 
!
ip dhcp pool VLAN6
 network 192.168.6.0 255.255.255.0
 default-router 192.168.6.254 
!
!
~~~
<b>R18:</b>
~~~
ip dhcp pool 4
 network 192.168.4.0 255.255.255.0
 default-router 192.168.4.254 
!
ip dhcp pool 5
 network 192.168.5.0 255.255.255.0
 default-router 192.168.5.254 
~~~
<b>R28:</b>
~~~
!
ip dhcp excluded-address 192.168.2.254
ip dhcp excluded-address 192.168.3.254
!
ip dhcp pool Vlan2
 network 192.168.2.0 255.255.255.0
 default-router 192.168.2.254 
!
ip dhcp pool Vlan3
 network 192.168.3.0 255.255.255.0
 default-router 192.168.3.254 
!
~~~
>VPC1 в VLAN 6 (192.168.6.1)<br>
>VPC7 в VLAN 7 (192.168.7.1)<br>
>VPC8 в VLAN 4 (192.168.4.1)<br>
>VPC в VLAN 5  (192.168.5.1)<br>
>VPC30 в VLAN 2 (192.168.2.1)<br>
>VPC31 в VLAN 3 (192.168.3.1)<br>


- ## Часть 4. Настройка VLAN/Loopbackup interface управления для сетевых устройств

На каждом активном устройстве был задан Loopback-интерфейс для упрощения оргазации сети вцелом и возможности удаленного управления сетевыми устройствами 

R26 Lb0: 1.1.1.1<br>
R25 Lb0: 2.2.2.2<br>
R23 Lb0: 3.3.3.3<br>
R24 Lb0: 4.4.4.4<br>
R28 Lb0: 5.5.5.5<br>
R22 Lb0: 6.6.6.6<br>
R21 Lb0: 7.7.7.7<br>
R15 Lb0: 12.12.12.12<br>
R18 Lb0: 9.9.9.9<br>
R27 Lb0: 10.10.10.10<br>
R14 Lb0: 11.11.11.11<br>
R12 Lb0: 13.13.13.13<br>
R13 Lb0: 14.14.14.14<br>


- ## Часть 5. Оптимизация использования линков и исключения broadcast-штормов

В сети офиса Москва развернут агрегированный канал между SW4 и SW5 для увеличения отказоустойчивости и скорости передачи данных между свичами:

~~~
interface Port-channel1
 no shutdown
!
interface Ethernet0/0
 no shutdown
 switchport trunk allowed vlan 6,7
 switchport trunk encapsulation dot1q
 switchport mode trunk
!
interface Ethernet0/1
 no shutdown
 switchport trunk allowed vlan 6,7
 switchport trunk encapsulation dot1q
 switchport mode trunk
!
~~~

VLAN6 и VLAN 7 разведены по разным физическим портам коммутаторов R12 и R13, на которых поднят протокол VRRP:

#### R12:
~~~
interface Ethernet0/0.6
 no shutdown
 encapsulation dot1Q 6
 ip address 192.168.6.254 255.255.255.0
 ip helper-address 10.128.22.1
 vrrp 6 ip 192.168.6.254
 vrrp 6 timers advertise 10
 no vrrp 6 preempt
 vrrp 6 priority 200
!
interface Ethernet0/1
 no shutdown
 no ip address
!
interface Ethernet0/1.7
 no shutdown
 encapsulation dot1Q 7
 ip address 192.168.7.253 255.255.255.0
 ip helper-address 10.128.22.1
 vrrp 7 ip 192.168.7.254
 vrrp 7 timers advertise 10
 no vrrp 7 preempt
 vrrp 7 priority 50
~~~
#### R13:
~~~
interface Ethernet0/0.7
 no shutdown
 encapsulation dot1Q 7
 ip address 192.168.7.254 255.255.255.0
 ip helper-address 10.128.23.1
 vrrp 7 ip 192.168.7.254
 vrrp 7 timers advertise 10
 no vrrp 7 preempt
 vrrp 7 priority 200
!
interface Ethernet0/1
 no shutdown
 no ip address
!
interface Ethernet0/1.6
 no shutdown
 encapsulation dot1Q 6
 ip address 192.168.6.253 255.255.255.0
 ip helper-address 10.128.23.1
 vrrp 6 ip 192.168.6.254
 vrrp 6 timers advertise 10
 no vrrp 6 preempt
 vrrp 6 priority 50
!
~~~



























