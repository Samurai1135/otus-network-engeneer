# Проектирование сети

`Цель:`
В данной самостоятельной работе необходимо распланировать адресное пространство,
настроить IP на всех активных портах для дальнейшей работы над проектом,
адресное пространство должно быть задокументировано

# Задание:
- `Часть1:` Разработать и задокументировать адресное пространство для лабораторного стенда.
- `Часть2:` Настроить ip адреса на каждом активном порту
- `Часть3:` Настроить каждый VPC в каждом офисе в своем VLAN.
- `Часть4:` Настроить VLAN/Loopbackup interface управления для сетевых устройств
- `Часть5:` Настроить сети офисов так, чтобы не возникало broadcast штормов, а использование линков было максимально оптимизировано

<br><br>
- ## Часть 1. Адресное пространство для лабораторного стенда

![](https://github.com/Samurai1135/otus-network-engeneer/blob/ace1e5bf555b6302758c99ccfee81731c369c344/Lab-04/Network%20Scheeme/stand1.png)

>Для связи коммутаторов между офисами и провайдерами используем сети класса А. Формат IP-адреса: 10.x.x.x с маской 255.255.255.252<br>
>Для локальных сетей офисов используем сети класса С. Формат IP-адреса: 192.168.x.x с маской 255.255.255.0<br>
>Внутриофисные подсети для связи коммутаторов имеют формат IP-адреса: 10.128.x.x  с маской 255.255.255.252<br>

Подсети Чокурдах-Триада: 10.0.0.0/30 и 10.0.1.0/30 <br>
Подсеть Лабытнанги-Триада: 10.0.3.0/30<br>
Подсети С.-Петербург-Триада: 10.0.2.0/30 и 10.0.4.0/30<br>
Подсеть Ламас-Триада: 10.6.0.0/30<br>
Подсеть Киторн-Триада: 10.5.0.0/30<br>
Подсеть Киторн-Ламас: 10.9.0.0/30<br>
Подсеть Москва-Киторн: 10.7.0.0/30<br>
Подсеть Москва-Ламас: 10.8.0.0/30<br>
<br>
<b>_Подсети в офисе Москва:_</b><br>
R14-R13: 10.128.21.0/30<br>
R14-R12: 10.128.20.0/30<br>
R15-R12: 10.128.22.0/30<br>
R15-R13: 10.128.23.0/30<br>
<br>
<b>_Подсети в офисе С.-Петербург:_</b><br>
R18-R17: 10.128.0.0/30<br>
R18-R16: 10.128.2.0/30<br>
<br>
<b>_Подсети провайдера Триада:_</b><br>
R24-R26: 10.1.0.0/30<br>
R26-R25: 10.4.0.0/30<br>
R25-R23: 10.3.0.0/30<br>
R23-R24: 10.2.0.0/30<br>

- ## Часть 2. Настройка IP-адресов на активных портах сетевых устройств

<b>Офис Москва:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R12                 | eth 0/2             | 10.128.20.2/30 |
|                    | eth 0/3                  | 10.128.22.2/30 |
|                 | eth 0/0.6             | 192.168.6.254/24 |
|                    | eth 0/1.7                 | 192.168.7.253/24 |
| R13                 | eth 0/2             | 10.128.23.2/30 |
|                    | eth 0/3                  | 10.128.21.2/30 |
|                 | eth 0/0.7             | 192.168.7.254/24 |
|                    | eth 0/1.6                  | 192.168.6.253/24 |
| R14                 | eth 0/0             | 10.128.20.1/30 |
|                    | eth 0/1                  | 10.128.21.1/30 |
|                    | eth 0/2                  | 10.7.0.2/30 |
| R15                 | eth 0/0             | 10.128.23.1/30 |
|                    | eth 0/1                  | 10.128.22.1/30 |
|                    | eth 0/2                  | 10.8.0.2/30 |

<b>Офис С.-Петербург:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R18                 | eth 0/0             | 10.128.2.1/30 |
|                    | eth 0/1                  | 10.128.0.1/30 |
|                 | eth 0/2            | 10.0.4.2/30 |
|                 | eth 0/3            | 10.0.2.2/30 |
|                    | eth 0/1.7                 | 192.168.7.253/24 |
| R17                 | eth 0/0.4             | 192.168.4.254/24 |
|                    | eth 0/1                  | 10.128.0.2/30 |
|                 | eth 0/2.5             | 192.168.5.253/24 |
|                    | eth 0/1.6                  | 192.168.6.253/24 |
| R16                 | eth 0/0.5             | 192.168.5.254/24 |
|                    | eth 0/1                  | 10.128.2.2/30 |
|                    | eth 0/2.4                  | 192.168.4.253/24 |

<b>Офис Чокурдах:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R28                 | eth 0/0             | 10.0.0.2/30 |
|                    | eth 0/1                  | 10.0.1.2/30 |
|                 | eth 0/2.2            | 192.168.2.254/24 |
|                 | eth 0/2.3            | 192.168.3.254/24 |

<b>Офис Лабытнанги:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R27                 | eth 0/0             | 10.0.3.2/30 |

<b>Провайдер Триада:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R23                 | eth 0/0             | 10.5.0.1/30 |
|                  | eth 0/1             | 10.3.0.2/30 |
|                | eth 0/2             | 10.2.0.1/30 |
| R24                 | eth 0/0             | 10.6.0.1/30 |
|                  | eth 0/1             | 10.1.0.2/30 |
|                | eth 0/2             | 10.2.0.2/30 |
|                | eth 0/3             | 10.0.4.1/30 |
| R25                 | eth 0/0             | 10.3.0.1/30 |
|                  | eth 0/1             | 10.0.3.1/30 |
|                | eth 0/2             | 10.4.0.2/30 |
|                | eth 0/3             | 10.0.1.1/30 |
| R26                 | eth 0/0             | 10.1.0.1/30 |
|                  | eth 0/1             | 10.0.0.1/30 |
|                | eth 0/2             | 10.4.0.1/30 |
|                | eth 0/3             | 10.0.2.1/30 |

<b>Провайдер Ламас:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R21                 | eth 0/0             | 10.8.0.1/30 |
|                  | eth 0/1             | 10.9.0.1/30 |
|                | eth 0/2             | 10.6.0.2/30 |

<b>Провайдер Киторн:</b><br>
| Наименование       | Порт |   IP адресация |
| :----------------- | :------------------- | :---------------------------------- |
| R21                 | eth 0/0             | 10.7.0.1/30 |
|                  | eth 0/1             | 10.9.0.2/30 |
|                | eth 0/2             | 10.5.0.2/30 |


- ## Часть 3. Настройка каждого VPC в отдельном VLAN


#### Примеры конфигурации VPC:

<b>VPC1:</b>
~~~
set pcname VPCS
ip 192.168.6.1 192.168.6.254 24
~~~
<b>VPC7:</b>
~~~
set pcname VPCS
ip 192.168.7.1 192.168.7.254 24
~~~
<b>VPC8:</b>
~~~
set pcname VPCS
ip 192.168.4.1 192.168.4.254 24

~~~
<b>VPC:</b>
~~~
set pcname VPCS
ip 192.168.5.1 192.168.5.254 24
~~~
<b>VPC30:</b>
~~~
set pcname VPCS
ip 192.168.2.1 192.168.2.254 24

~~~
<b>VPC31:</b>
~~~
set pcname VPCS
ip 192.168.3.1 192.168.3.254 24
~~~

>VPC1 в VLAN 6 (192.168.6.1)<br>
>VPC7 в VLAN 7 (192.168.7.1)<br>
>VPC8 в VLAN 4 (192.168.4.1)<br>
>VPC в VLAN 5  (192.168.5.1)<br>
>VPC30 в VLAN 2 (192.168.2.1)<br>
>VPC31 в VLAN 3 (192.168.3.1)<br>


- ## Часть 4. Настройка VLAN/Loopbackup interface управления для сетевых устройств

На каждом активном устройстве был задан Loopback-интерфейс для упрощения оргазации сети вцелом и возможности удаленного управления сетевыми устройствами 

R26 Lb0: 100.0.1.3<br>
R25 Lb0: 100.0.1.4<br>
R23 Lb0: 100.0.1.5<br>
R24 Lb0: 100.0.1.6<br>
R28 Lb0: 100.0.1.1<br>
R22 Lb0: 100.0.1.7<br>
R21 Lb0: 100.0.1.8<br>
R15 Lb0: 100.0.1.9<br>
R18 Lb0: 100.0.1.10<br>
R27 Lb0: 100.0.1.11<br>
R14 Lb0: 100.0.1.12<br>
R12 Lb0: 100.0.1.14<br>
R13 Lb0: 100.0.1.15<br>


- ## Часть 5. Оптимизация использования линков и исключения broadcast-штормов

В сети офиса <b>Москва</b> заменены свичи SW4 и SW5 на трехуровневые (L3-Switches).
Поднят протокол VRRP, объединяющий свичи в один виртуальный для увеличения количества линков.
Свич SW4 является MASTER для VLAN 6. Свич SW5 является MASTER для VLAN 7

Примеры конфигурации свичей и VRRP: 

#### SW4:
~~~
interface Ethernet0/0.6
 no shutdown
 encapsulation dot1Q 6
 ip address 192.168.6.254 255.255.255.0
 vrrp 6 ip 192.168.6.254
 no vrrp 6 preempt
 vrrp 6 priority 200
!
interface Ethernet0/1
 no shutdown
 no ip address
!
interface Ethernet0/1.7
 no shutdown
 encapsulation dot1Q 7
 ip address 192.168.7.253 255.255.255.0
 vrrp 7 ip 192.168.7.254
 no vrrp 7 preempt
!
~~~
![](https://github.com/Samurai1135/otus-network-engeneer/blob/52815524c882c82a53e25683b8c971c340adb465/Lab-04/Network%20Scheeme/SW4.png)
#### SW5:
~~~
interface Ethernet0/0.7
 no shutdown
 encapsulation dot1Q 7
 ip address 192.168.7.254 255.255.255.0
 vrrp 7 ip 192.168.7.254
 no vrrp 7 preempt
 vrrp 7 priority 200
!
interface Ethernet0/1
 no shutdown
 no ip address
!
interface Ethernet0/1.6
 no shutdown
 encapsulation dot1Q 6
 ip address 192.168.6.253 255.255.255.0
 vrrp 6 ip 192.168.6.254
 no vrrp 6 preempt
!
~~~
![](https://github.com/Samurai1135/otus-network-engeneer/blob/52815524c882c82a53e25683b8c971c340adb465/Lab-04/Network%20Scheeme/SW5.png)

В сети офиса <b>С.-Петербург</b> между SW9 и SW10 организован агрегированный канал.

























